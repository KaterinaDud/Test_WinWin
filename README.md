# Test_WinWin
This project implements a tiny service containerized with Docker Compose and exposed via Nginx reverse proxy.

---

# WinWin Travel ‚Äî –¢–µ—Å—Ç–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è DevOps

–¶–µ–π –ø—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î –º—ñ–Ω—ñ-—Å–µ—Ä–≤—ñ—Å —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –∑ Docker Compose —Ç–∞ Nginx reverse proxy.

---

## üìå –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ

* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–æ—Å—Ç–∏–π –≤–µ–±-—Å–µ—Ä–≤—ñ—Å (`hashicorp/http-echo`), —è–∫–∏–π –≤—ñ–¥–¥–∞—î JSON —É —Ñ–æ—Ä–º–∞—Ç—ñ:

  ```json
  {"status":"ok","service":"app","env":"<ENV_NAME>"}
  ```
* –ü–µ—Ä–µ–¥ —Å–µ—Ä–≤—ñ—Å–æ–º –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ **nginx reverse proxy**:

  * —Å–ª—É—Ö–∞—î –Ω–∞ `localhost:8080`;
  * –ø—Ä–æ–∫–∏–¥—É—î –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Request-ID` (–≥–µ–Ω–µ—Ä—É—î, —è–∫—â–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π);
  * –æ–±–º–µ–∂—É—î –∑–∞–ø–∏—Ç–∏: –º–∞–∫—Å–∏–º—É–º **10 –∑–∞–ø–∏—Ç—ñ–≤/—Å–µ–∫ –∑ –æ–¥–Ω–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞**, —ñ–Ω–∞–∫—à–µ –ø–æ–≤–µ—Ä—Ç–∞—î `429 Too Many Requests`.
* –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ `.env` (–ø–∞—Ä–∞–º–µ—Ç—Ä `ENV_NAME`).
* –î–æ–¥–∞–Ω–æ **healthchecks** –¥–ª—è –æ–±–æ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤.
* –°—Ç–≤–æ—Ä–µ–Ω–æ **Makefile** –¥–ª—è –∑—Ä—É—á–Ω–æ–≥–æ –∫–µ—Ä—É–≤–∞–Ω–Ω—è (`make up / make down / make logs / make test`).

---

## –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

* –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π **Docker** —Ç–∞ **docker-compose**.
* –î–ª—è `make test` —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –º–∞—Ç–∏ `jq` (–¥–ª—è —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è JSON).

---

## –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

```bash
# 1. –ö–ª–æ–Ω—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
git clone <repo-url>
cd winwin-devops-test

# 2. –°—Ç–≤–æ—Ä–∏ —Ñ–∞–π–ª .env –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø—Ä–∏–∫–ª–∞–¥—É
cp .env.example .env

# 3. –ó–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
make up
```

---

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

1. –ü–µ—Ä–µ–≤—ñ—Ä —Å–µ—Ä–≤—ñ—Å:

   ```bash
   curl -s http://localhost:8080/healthz
   ```

   –û—á—ñ–∫—É–≤–∞–Ω–æ:

   ```json
   {"status":"ok","service":"app","env":"local"}
   ```

2. –ü–µ—Ä–µ–≤—ñ—Ä rate-limit:

   ```bash
   make test
   ```

   –£ –≤—ñ–¥–ø–æ–≤—ñ–¥—è—Ö –±—É–¥—É—Ç—å `200` —ñ —á–∞—Å—Ç–∏–Ω–∞ `429`.

---

##  –ó—É–ø–∏–Ω–∫–∞

```bash
make down
```

---

### Bonus (Kubernetes)

> –ù–µ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ, –∞–ª–µ –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ **Kind + Ingress**.
> (—Ç—É—Ç –º–æ–∂–Ω–∞ –±—É–¥–µ –æ–ø–∏—Å–∞—Ç–∏, —è–∫—â–æ —Ç–∏ –¥–æ—Ä–æ–±–∏—à K8s –º–∞–Ω—ñ—Ñ–µ—Å—Ç–∏).

---

---




–•–æ—á–µ—à, —è –æ–¥—Ä–∞–∑—É –ø—ñ–¥—Å—Ç–∞–≤–ª—é –ø—Ä–∏–∫–ª–∞–¥ —Ç–≤–æ–≥–æ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ JSON (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `"service":"winwin"`, `"env":"prod"`) —É `README`, —â–æ–± –∑–±—ñ–≥–∞–ª–æ—Å—è –∑ —Ç–∏–º, —â–æ —Ä–µ–∞–ª—å–Ω–æ —É —Ç–µ–±–µ –≤—ñ–¥–¥–∞—î `/healthz`?
